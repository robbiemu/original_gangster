# OG: The Original Gangster Command-line AI Agent

OG is a powerful command-line interface (CLI) tool designed to empower users with an automated AI agent for various tasks on their local machine. It orchestrates a multi-agent system (Planner, Executor, Auditor) to achieve user-defined prompts, prioritizing safety and user control through robust auditing and explicit approval mechanisms.

## ðŸ’¡ Usage

Run OG with a natural language prompt or a shell-like query:

```bash
og "summarize this repo"
og "generate a gitignore for Rust"
og "list files modified in last commit"
og "write a python script that prints 'hello world'"
```

## âœ¨ Key Features

*   **Multi-Agent Orchestration:** Utilizes a Planner agent to break down tasks into actionable steps, an Executor agent to perform those steps using a suite of tools, and a vigilant Auditor agent for continuous safety checks.
*   **Two-Tier Approval System:**
    *   **Initial Recipe Approval:** For multi-step tasks, the user is presented with the complete "recipe" (plan) generated by the agent and can approve or deny the entire sequence upfront.
    *   **Per-Action Approval & Auto-Execution:** Even if a recipe is pre-approved, **every potentially sensitive action (like `shell_tool` or `file_content_tool`) is individually audited for safety**. If deemed safe *and* it matches an expected step within a pre-approved recipe (without prior deviation), it is **auto-executed**. Otherwise, explicit user approval is requested for that specific action.
*   **Security Auditing:** A dedicated Auditor agent performs rigorous checks on proposed actions, leveraging system context, file permissions, and extended attributes to identify and flag potentially unsafe operations.
*   **Session Persistence:** All session data, including conversation history, planned recipes, and executed actions, is robustly saved to an HDF5 file (with a JSON fallback) for seamless session resumption.
*   **Configurability:** Easily customize model IDs, parameters, agent paths, and even agent prompts via `og_config.toml` and `prompts.toml`.
*   **Local-First Design:** Designed to work efficiently with local large language models (LLMs) like Ollama, ensuring data privacy and reducing reliance on external APIs.
*   **Cross-Platform (Python Agent is Linux/macOS focused):** The Go CLI is cross-platform, but some of the Python agent's auditor tools currently use macOS-specific commands (`xattr`, `csrutil`, `sw_vers`, `ls -lO`, `stat -f`). The `show_context.sh` script also uses `zsh` for context gathering. These can be adapted for Linux.

## ðŸš€ Installation

### Prerequisites

*   **Go:** Version 1.22 or higher.
*   **Python:** Version 3.10 or higher.
*   **uv (recommended):** For Python dependency management.
*   **Ollama (recommended):** For running local LLMs. Ensure you have `llama3` and `gemma3:27b-it` or similar models pulled.

### Steps

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/robbiemu/original_gangster.git
    cd original_gangster
    ```

2.  **Install Go Dependencies & Build CLI:**
    ```bash
    go mod tidy
    go build -o og ./og
    sudo mv og /usr/local/bin/ # Or any directory in your PATH
    ```

3.  **Install Python Dependencies:**
    ```bash
    uv sync # Install dependencies from pyproject.toml using uv
    ```

4.  **Initialize Configuration:**
    This command creates default configuration files in `~/.local/share/og/`.
    ```bash
    og init
    ```
    You will see output similar to:
    ```
    âœ¨ A starter config has been written to: /Users/youruser/.local/share/og/og_config.toml
    Please update 'python_agent_path' to point to your agent script.
    âœ¨ Default prompts have been copied to: /Users/youruser/.local/share/og/prompts/prompts.toml
    ```

5.  **Configure `og_config.toml`:**
    Open `~/.local/share/og/og_config.toml` in your favorite editor.
    **Crucially, update `python_agent_path`** to point to the `main.py` script of your Python agent.
    For example, if your `original_gangster` repo is in your home directory:
    ```toml
    [general]
    python_agent_path = "/Users/youruser/original_gangster/agent/main.py"
    # ... other settings ...
    ```
    Adjust model IDs and parameters for `default_agent`, `executor_agent`, `planner_agent`, and `auditor_agent` if you're using different LLMs or API endpoints.

    note: There is a [configuration guide](config.md).

## License

This project is licensed under the LGPLv3. (see the included [LICENSE](LICENSE) file)
